$namespace-prefix: 'tippy';
$placements: 'top', 'bottom', 'left', 'right';
$origins: bottom, top, right, left;
$backdrop-origins: 0% 25%, 0% -50%, 50% 0%, -50% 0%;
$backdrop-border-radii: 40% 40% 0 0, 0 0 30% 30%, 50% 0 0 50%, 0 50% 50% 0;
$bullet-space: 22px !default;
$tooltip-border-radii: $border-radii !default;
$tooltip-background-colour: white !default;
$bullet-space: 22px !default;
$menu-background-colour-current: $colour-accent !default;
$menu-text-colour-current: white !default;
$menu-list-item-background-colour-hover: rgba(0, 0, 0, 0.08) !default;
$menu-list-item-text-colour: #666 !default;
$menu-list-item-text-colour-hover: black !default;
$menu-list-item-margin: 2px 0 !default;
$menu-list-line-height: 22px !default;

@import "../libraries/tippyjs/index";
@import "../libraries/tippyjs/themes/patterns-tooltip";
// @import "../libraries/tippyjs/themes/light-border";

.tooltip-container {
  overflow: visible;
  font-size: 1rem;
  padding: 0;

  @media print {
    display: none !important;
  }

  .tippy-content {
    min-width: 250px;
    border-radius: $tooltip-border-radii;

    > *:last-child {
      margin-bottom: 0;
    }
  }

  ul.menu {
    // margin: 0;
    list-style-type: none;
    
    li {
      line-height: 1.5em;
      margin: $menu-list-item-margin;

      > button,
      > form > button,
      > fieldset.pat-checklist label,
      > a {
        // background: none;
        display: block;
        color: $menu-list-item-text-colour;
        // line-height: 1.5em;
        cursor: default;
        // padding: 0.1em 0 0.1em $bullet-space;
        box-shadow: none;
        font-size: 1em;
        font-family: $body-font-family;
        padding-left: calc(#{$bullet-space} + 8px);
        border-radius: $tooltip-border-radii;

        body[dir=rtl] & { 
          padding-left: 0;
          padding-right: $bullet-space;
          text-align: right;
        }

        > a:hover,
        &:hover {
          color: black;
          text-decoration: none !important;
          background-color: $menu-list-item-background-colour-hover;
          color: $menu-list-item-text-colour-hover;
        }

        &:active,
        &.active {
          box-shadow: none;
        }
      }

      > *,
      > form > *,
      > form > label > * {

        &.disabled,
        &[disabled] {
          color: rgba(0, 0, 0, 0.2);
          cursor: default;
          -webkit-pointer-events: none;
          pointer-events: none;

          &:hover,
          &:active {
            color: rgba(0, 0, 0, 0.2) !important;
          }
        }

      }

      a:before, 
      button:before {
        margin-left: -1 * $bullet-space;
        float: left;
        width: $bullet-space;
        line-height: $menu-list-line-height;

        body[dir=rtl] & { 
          float: right;
          margin-right: -1 * $bullet-space;
          margin-left: 0;
        }
      }

      &.current {
        // &:before {
        //   content: "âœ“";
        //   float: left;
        //   margin-left: -1.5em;
        //   font: 1em fontello;
        // }

        a {
          color: $menu-text-colour-current;
          background-color: $menu-background-colour-current;
        }
      }

      &:hover {
        text-decoration: none;
        color: black;
      }

      &.file-upload {
        position: relative;
        text-indent: 20px;
        height: 25px;
        overflow: hidden;
        
        &:before {
          content: "\e808";
          font-family: fontello;
          position: absolute;
          left: -13px;
        }
        
        form {
          position: absolute;
          top: 0;
          right: 0;
          bottom: 0;
          left: 0;
          label {
            position: absolute;
            margin-left: 0;
            left: 0;
            overflow: hidden;
            display: block;
            right: 0;
            cursor: pointer;
            padding-left: 2px;
          }
          input {
            opacity: 0;
            filter: alpha(opacity = 0);
            width: 100%;
            cursor: pointer;
            position: absolute;
            top: 3px;
            left: 0;
          }
        }
      }
    }
  }

  // Variations

  &.label {
    .tippy-content {
      text-align: center;
      min-width: 0;
      padding: 6px 10px;
    }
  }

  .tippy-content {
    background-color: $tooltip-background-colour;
  }

  [data-placement^='bottom'] .tippy-arrow {
    border-bottom-color: $tooltip-background-colour;

    &::before {
      border-bottom-color: $tooltip-background-colour;
    }
  }

  [data-placement^='left'] .tippy-arrow {
    border-left-color: $tooltip-background-colour;

    &::before {
      border-left-color: $tooltip-background-colour;
    }
  }

  [data-placement^='right'] .tippy-arrow {
    border-right-color: $tooltip-background-colour;

    &::before {
      border-right-color: $tooltip-background-colour;
    }
  }

  [data-placement^='top'] .tippy-arrow {
    border-top-color: $tooltip-background-colour;

    &::before {
      border-top-color: $tooltip-background-colour;
    }
  }

  &.info {
    .tippy-content {
      background-color: $colour-notice-background;
      -webkit-hyphens: auto;
      hyphens: auto;
      padding: 18px;

      .pat-button.read-more {
        clear: both;
        margin-top: 14px;
        margin-bottom: -5px;
      }

    }

    [data-placement^='bottom'] .tippy-arrow {
      border-bottom-color: $colour-notice-background;

      &::before {
        border-bottom-color: $colour-notice-background;
      }
    }

    [data-placement^='left'] .tippy-arrow {
      border-left-color: $colour-notice-background;

      &::before {
        border-left-color: $colour-notice-background;
      }
    }

    [data-placement^='right'] .tippy-arrow {
      border-right-color: $colour-notice-background;

      &::before {
        border-right-color: $colour-notice-background;
      }
    }

    [data-placement^='top'] .tippy-arrow {
      border-top-color: $colour-notice-background;

      &::before {
        border-top-color: $colour-notice-background;
      }
    }
  }

  &.rich {
    .tippy-content {
      @include pat-rich();
      p,h1,h2,h3,ul,ol,table {
        margin-bottom: 0.5em;
      }

      > *:not(.footer):last-child {
        margin-bottom: 0;
      }
    }
  }

  &.large {
    @include screen-size(large) {
      // width: 50%;
      // Width 50% caused trouble with the lock steal tooltip.
    }
  }

  .tooltip-separation-header {
    color: black;
    font-weight: bold;
    /* font-size: 12px; */
    font-size: 1em;
    /* line-height: 18px; */
    margin: 10px 0;

    &:first-child {
      margin-top: 0;
    }
  }

  .item-selector {
    position: static;
  }

  .button-bar.bottom {
    position: absolute;
    bottom: 0;
    left: 0;
  }
}